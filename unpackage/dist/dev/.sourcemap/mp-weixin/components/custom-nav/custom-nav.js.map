{"version":3,"file":"custom-nav.js","sources":["components/custom-nav/custom-nav.vue","../../../../soft/HBuilderX/plugins/uniapp-cli-vite/uniComponent:/RDovZW1weXJlYW4vcHJvamVjdC91bmlhcHAtc3R1ZHkvdW5pYXBwLWRlbW8vY29tcG9uZW50cy9jdXN0b20tbmF2L2N1c3RvbS1uYXYudnVl"],"sourcesContent":["<template>\r\n  <!-- 自定义导航容器：适配状态栏高度 + 多端样式 -->\r\n  <view class=\"custom-nav-wrap\" :style=\"{ \r\n\t      top: statusBarTop+ 'px',\r\n\t      backgroundColor: bgColor,\r\n\t      height: navBarHeight + 'px'\r\n\t    }\">\r\n\t  <view\r\n\t    class=\"custom-nav\" \r\n\t  >\r\n\t    <!-- 左侧返回按钮 -->\r\n\t    <view class=\"nav-left\" @click=\"handleBack\" v-if=\"showBack\">\r\n\t  \t <up-icon name=\"arrow-left\" color=\"#333\" size=\"24\"></up-icon>\r\n\t    </view>\r\n\t  \t<!-- 左侧功能按钮 -->\r\n\t  \t<view class=\"nav-left-addr\" @tap=\"showAddrModal=!showAddrModal\" v-if=\"showAddr\">\r\n\t  \t\t<image src=\"/static/index/local.png\"></image>\r\n\t  \t\t<text>{{addressText}}</text>\r\n\t  \t\t<u-icon name=\"arrow-down-fill\" size=\"8\"></u-icon>\r\n\t  \t</view>\r\n\t  \r\n\t    <!-- 中间标题 -->\r\n\t    <view class=\"nav-title\" :style=\"{ color: titleColor}\">\r\n\t      {{ title }}\r\n\t    </view>\r\n\t  \r\n\t    <!-- 右侧操作区（支持文字/图标） -->\r\n\t    <view class=\"nav-right\" @click=\"handleRightClick\" v-if=\"rightText || rightIcon\">\r\n\t      <uni-icons v-if=\"rightIcon\" :type=\"rightIcon\" size=\"20\" :color=\"iconColor\"></uni-icons>\r\n\t      <text v-else :style=\"{ color: iconColor }\">{{ rightText }}</text>\r\n\t    </view>\r\n\t  </view>\r\n\t  <up-picker closeOnClickOverlay \r\n\t  \t  @cancel=\"showAddrModal=false\" \r\n\t  \t  @close=\"showAddrModal=false\" \r\n\t  \t  @confirm=\"onConfirm\"\r\n\t  \t  :show=\"showAddrModal\" \r\n\t  \t  :columns=\"options\"\r\n\t  >\r\n\t  </up-picker>\r\n  </view>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { ref, onMounted, computed } from 'vue';\r\nimport { onLoad, onReady, onShow } from '@dcloudio/uni-app';\r\n// 1. 定义Props（Vue3 语法糖）\r\nconst props = defineProps({\r\n  // 导航标题\r\n  title: {\r\n    type: String,\r\n    default: '自定义导航'\r\n  },\r\n  // 是否显示返回按钮\r\n  showBack: {\r\n    type: Boolean,\r\n    default: true\r\n  },\r\n  // 是否显示选择地址按钮\r\n  showAddr:{\r\n\t  type:Boolean,\r\n\t  default:false\r\n  },\r\n  // 右侧按钮文字\r\n  rightText: {\r\n    type: String,\r\n    default: ''\r\n  },\r\n  // 右侧图标（uni-icons 类型）\r\n  rightIcon: {\r\n    type: String,\r\n    default: ''\r\n  },\r\n  // 导航背景色\r\n  bgColor: {\r\n    type: String,\r\n    default: 'transparent'\r\n  },\r\n  // 标题颜色\r\n  titleColor: {\r\n    type: String,\r\n    default: '#333333'\r\n  },\r\n  // 图标/右侧文字颜色\r\n  iconColor: {\r\n    type: String,\r\n    default: '#007aff'\r\n  },\r\n  options:{\r\n\t  type:Array,\r\n\t  default:[]\r\n  }\r\n});\r\nconst showAddrModal = ref(false)\r\nconst titleTop = ref(0)\r\nconst addressText = ref(props.options[0][0])\r\n// 2. 定义Emits（透传事件）\r\nconst emit = defineEmits(['rightClick', 'backClick']);\r\n\r\n// 3. 响应式数据\r\nconst statusBarTop = ref(10); // 状态栏高度（px）\r\nconst navBarHeight = ref(44); // 导航栏核心高度（默认44px，小程序胶囊适配后动态修改）\r\n\r\n// 4. 生命周期：获取系统信息（Vue3 + Uniapp 兼容）\r\nonMounted(() => {\r\n\tuni.__f__('log','at components/custom-nav/custom-nav.vue:106',123)\r\n  const systemInfo = uni.getSystemInfoSync();\r\n  // 基础状态栏高度\r\n  statusBarTop.value = systemInfo.safeArea.top || 10\r\n  navBarHeight.value = systemInfo.statusBarHeight;\r\n\tuni.__f__('log','at components/custom-nav/custom-nav.vue:111','systemInfo',systemInfo)\r\n  // 微信小程序：适配胶囊按钮高度/位置\r\n\r\n  const menuButtonInfo = uni.getMenuButtonBoundingClientRect();\r\n  // 胶囊按钮高度 = 导航栏高度\r\n  navBarHeight.value = menuButtonInfo.height;\r\n  uni.__f__('log','at components/custom-nav/custom-nav.vue:117','menuButtonInfo',menuButtonInfo)\r\n  // 胶囊按钮上下间距 = 导航栏额外高度（可选）\r\n  const navExtraHeight = (menuButtonInfo.top - systemInfo.statusBarHeight) * 2;\r\n  navBarHeight.value += navExtraHeight;\r\n\r\n});\r\n\r\n// 5. 方法定义\r\n// 返回上一页\r\nconst handleBack = () => {\r\n  emit('backClick'); // 透传返回事件（可选）\r\n  uni.navigateBack({\r\n    delta: 1,\r\n    fail: () => {\r\n      // 无页面可返回时跳首页\r\n      uni.reLaunch({ url: '/pages/index/index' });\r\n    }\r\n  });\r\n};\r\n// 选择地址\r\nconst onConfirm = e => {\r\n\taddressText.value = e.value[0]\r\n\tshowAddrModal.value = false\r\n}\r\n// 右侧按钮点击\r\nconst handleRightClick = () => {\r\n  emit('rightClick');\r\n};\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n@import \"./index.scss\"\r\n</style>","import Component from 'D:/empyrean/project/uniapp-study/uniapp-demo/components/custom-nav/custom-nav.vue'\nwx.createComponent(Component)"],"names":["ref","onMounted","uni"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+CA,UAAM,QAAQ;AA8CR,UAAA,gBAAgBA,kBAAI,KAAK;AACdA,kBAAAA,IAAI,CAAC;AACtB,UAAM,cAAcA,cAAAA,IAAI,MAAM,QAAQ,CAAC,EAAE,CAAC,CAAC;AAE3C,UAAM,OAAO;AAGP,UAAA,eAAeA,kBAAI,EAAE;AACrB,UAAA,eAAeA,kBAAI,EAAE;AAG3BC,kBAAAA,UAAU,MAAM;AACXC,oBAAAA,MAAA,MAAM,OAAM,+CAA8C,GAAG;AAC1D,YAAA,aAAaA,oBAAI;AAEV,mBAAA,QAAQ,WAAW,SAAS,OAAO;AAChD,mBAAa,QAAQ,WAAW;AACjCA,oBAAA,MAAI,MAAM,OAAM,+CAA8C,cAAa,UAAU;AAG9E,YAAA,iBAAiBA,oBAAI;AAE3B,mBAAa,QAAQ,eAAe;AACpCA,oBAAA,MAAI,MAAM,OAAM,+CAA8C,kBAAiB,cAAc;AAE7F,YAAM,kBAAkB,eAAe,MAAM,WAAW,mBAAmB;AAC3E,mBAAa,SAAS;AAAA,IAAA,CAEvB;AAID,UAAM,aAAa,MAAM;AACvB,WAAK,WAAW;AAChBA,oBAAAA,MAAI,aAAa;AAAA,QACf,OAAO;AAAA,QACP,MAAM,MAAM;AAEVA,wBAAAA,MAAI,SAAS,EAAE,KAAK,qBAAsB,CAAA;AAAA,QAC5C;AAAA,MAAA,CACD;AAAA,IAAA;AAGH,UAAM,YAAY,CAAK,MAAA;AACV,kBAAA,QAAQ,EAAE,MAAM,CAAC;AAC7B,oBAAc,QAAQ;AAAA,IAAA;AAGvB,UAAM,mBAAmB,MAAM;AAC7B,WAAK,YAAY;AAAA,IAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC7InB,GAAG,gBAAgB,SAAS;"}