{"version":3,"names":["props","__props","showAddrModal","common_vendor","ref","titleTop","addressText","options","emit","__emit","statusBarHeight","navBarHeight","onMounted","index","__f__","systemInfo","getSystemInfoSync","value","menuButtonInfo","getMenuButtonBoundingClientRect","height","navExtraHeight","top","handleBack","navigateBack","delta","fail","reLaunch","url","onConfirm","e","handleRightClick","wx","createComponent","Component"],"sources":["custom-nav.vue","RDovZW1weXJlYW4vcHJvamVjdC91bmlhcHAtc3R1ZHkvdW5pYXBwLWRlbW8vY29tcG9uZW50cy9jdXN0b20tbmF2L2N1c3RvbS1uYXYudnVl"],"sourcesContent":["<template>\r\n  <!-- 自定义导航容器：适配状态栏高度 + 多端样式 -->\r\n  <view \r\n    class=\"custom-nav\" \r\n    :style=\"{ \r\n      paddingTop: statusBarHeight + 'px',\r\n      backgroundColor: bgColor,\r\n      height: navBarHeight + 'px'\r\n    }\"\r\n  >\r\n    <!-- 左侧返回按钮 -->\r\n    <view class=\"nav-left\" @click=\"handleBack\" v-if=\"showBack\">\r\n\t <up-icon name=\"arrow-left\" color=\"#333\" size=\"24\"></up-icon>\r\n    </view>\r\n\t<!-- 左侧功能按钮 -->\r\n\t<view class=\"nav-left-addr\" @tap=\"showAddrModal=!showAddrModal\" v-if=\"showAddr\">\r\n\t\t<image src=\"/static/index/local.png\"></image>\r\n\t\t<text>{{addressText}}</text>\r\n\t\t<u-icon name=\"arrow-down-fill\" size=\"8\"></u-icon>\r\n\t</view>\r\n\r\n    <!-- 中间标题 -->\r\n    <view class=\"nav-title\" :style=\"{ color: titleColor,top:titleTop+'px' }\">\r\n      {{ title }}\r\n    </view>\r\n\r\n    <!-- 右侧操作区（支持文字/图标） -->\r\n    <view class=\"nav-right\" @click=\"handleRightClick\" v-if=\"rightText || rightIcon\">\r\n      <uni-icons v-if=\"rightIcon\" :type=\"rightIcon\" size=\"20\" :color=\"iconColor\"></uni-icons>\r\n      <text v-else :style=\"{ color: iconColor }\">{{ rightText }}</text>\r\n    </view>\r\n  </view>\r\n  <up-picker closeOnClickOverlay \r\n\t  @cancel=\"showAddrModal=false\" \r\n\t  @close=\"showAddrModal=false\" \r\n\t  @confirm=\"onConfirm\"\r\n\t  :show=\"showAddrModal\" \r\n\t  :columns=\"options\"\r\n  >\r\n  </up-picker>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { ref, onMounted, computed } from 'vue';\r\nimport { onLoad } from '@dcloudio/uni-app';\r\n// 1. 定义Props（Vue3 语法糖）\r\nconst props = defineProps({\r\n  // 导航标题\r\n  title: {\r\n    type: String,\r\n    default: '自定义导航'\r\n  },\r\n  // 是否显示返回按钮\r\n  showBack: {\r\n    type: Boolean,\r\n    default: true\r\n  },\r\n  // 是否显示选择地址按钮\r\n  showAddr:{\r\n\t  type:Boolean,\r\n\t  default:false\r\n  },\r\n  // 右侧按钮文字\r\n  rightText: {\r\n    type: String,\r\n    default: ''\r\n  },\r\n  // 右侧图标（uni-icons 类型）\r\n  rightIcon: {\r\n    type: String,\r\n    default: ''\r\n  },\r\n  // 导航背景色\r\n  bgColor: {\r\n    type: String,\r\n    default: 'transparent'\r\n  },\r\n  // 标题颜色\r\n  titleColor: {\r\n    type: String,\r\n    default: '#333333'\r\n  },\r\n  // 图标/右侧文字颜色\r\n  iconColor: {\r\n    type: String,\r\n    default: '#007aff'\r\n  },\r\n  options:{\r\n\t  type:Array,\r\n\t  default:[]\r\n  }\r\n});\r\nconst showAddrModal = ref(false)\r\nconst titleTop = ref(0)\r\nconst addressText = ref(props.options[0][0])\r\n// 2. 定义Emits（透传事件）\r\nconst emit = defineEmits(['rightClick', 'backClick']);\r\n\r\n// 3. 响应式数据\r\nconst statusBarHeight = ref(0); // 状态栏高度（px）\r\nconst navBarHeight = ref(44); // 导航栏核心高度（默认44px，小程序胶囊适配后动态修改）\r\n\r\n// 4. 生命周期：获取系统信息（Vue3 + Uniapp 兼容）\r\nonMounted(() => {\r\n\tuni.__f__('log','at components/custom-nav/custom-nav.vue:105',123)\r\n  const systemInfo = uni.getSystemInfoSync();\r\n  // 基础状态栏高度\r\n  statusBarHeight.value = systemInfo.statusBarHeight;\r\n  titleTop.value = 'auto'\r\nuni.__f__('log','at components/custom-nav/custom-nav.vue:110','systemInfo',systemInfo)\r\n  // 微信小程序：适配胶囊按钮高度/位置\r\n\r\n  const menuButtonInfo = uni.getMenuButtonBoundingClientRect();\r\n  // 胶囊按钮高度 = 导航栏高度\r\n  navBarHeight.value = menuButtonInfo.height;\r\n  uni.__f__('log','at components/custom-nav/custom-nav.vue:116','menuButtonInfo',menuButtonInfo)\r\n  // 胶囊按钮上下间距 = 导航栏额外高度（可选）\r\n  const navExtraHeight = (menuButtonInfo.top - systemInfo.statusBarHeight) * 2;\r\n  titleTop.value = menuButtonInfo.top + navExtraHeight/2\r\n  navBarHeight.value += navExtraHeight;\r\n\r\n});\r\n\r\n// 5. 方法定义\r\n// 返回上一页\r\nconst handleBack = () => {\r\n  emit('backClick'); // 透传返回事件（可选）\r\n  uni.navigateBack({\r\n    delta: 1,\r\n    fail: () => {\r\n      // 无页面可返回时跳首页\r\n      uni.reLaunch({ url: '/pages/index/index' });\r\n    }\r\n  });\r\n};\r\n// 选择地址\r\nconst onConfirm = e => {\r\n\taddressText.value = e.value[0]\r\n\tshowAddrModal.value = false\r\n}\r\n// 右侧按钮点击\r\nconst handleRightClick = () => {\r\n  emit('rightClick');\r\n};\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n@import \"./index.scss\"\r\n</style>","import Component from 'D:/empyrean/project/uniapp-study/uniapp-demo/components/custom-nav/custom-nav.vue'\nwx.createComponent(Component)"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IA8CA,IAAMA,KAAA,GAAQC,OAAA;IA8CR,IAAAC,aAAA,GAAgBC,aAAA,CAAAC,GAAA,CAAI,KAAK;IACzB,IAAAC,QAAA,GAAWF,aAAA,CAAAC,GAAA,CAAI,CAAC;IACtB,IAAME,WAAA,GAAcH,aAAA,CAAAC,GAAA,CAAIJ,KAAA,CAAMO,OAAA,CAAQ,CAAC,EAAE,CAAC,CAAC;IAE3C,IAAMC,IAAA,GAAOC,MAAA;IAGP,IAAAC,eAAA,GAAkBP,aAAA,CAAAC,GAAA,CAAI,CAAC;IACvB,IAAAO,YAAA,GAAeR,aAAA,CAAAC,GAAA,CAAI,EAAE;IAG3BD,aAAA,CAAAS,SAAA,CAAU,YAAM;MACXT,aAAA,CAAAU,KAAA,CAAAC,KAAA,CAAM,OAAM,+CAA8C,GAAG;MAC1D,IAAAC,UAAA,GAAaZ,aAAA,CAAAU,KAAA,CAAIG,iBAAA;MAEvBN,eAAA,CAAgBO,KAAA,GAAQF,UAAA,CAAWL,eAAA;MACnCL,QAAA,CAASY,KAAA,GAAQ;MACnBd,aAAA,CAAAU,KAAA,CAAIC,KAAA,CAAM,OAAM,+CAA8C,cAAaC,UAAU;MAG7E,IAAAG,cAAA,GAAiBf,aAAA,CAAAU,KAAA,CAAIM,+BAAA;MAE3BR,YAAA,CAAaM,KAAA,GAAQC,cAAA,CAAeE,MAAA;MACpCjB,aAAA,CAAAU,KAAA,CAAIC,KAAA,CAAM,OAAM,+CAA8C,kBAAiBI,cAAc;MAE7F,IAAMG,cAAA,IAAkBH,cAAA,CAAeI,GAAA,GAAMP,UAAA,CAAWL,eAAA,IAAmB;MAClEL,QAAA,CAAAY,KAAA,GAAQC,cAAA,CAAeI,GAAA,GAAMD,cAAA,GAAe;MACrDV,YAAA,CAAaM,KAAA,IAASI,cAAA;IAAA,CAEvB;IAID,IAAME,UAAA,GAAa,SAAbA,WAAA,EAAmB;MACvBf,IAAA,CAAK,WAAW;MAChBL,aAAA,CAAAU,KAAA,CAAIW,YAAA,CAAa;QACfC,KAAA,EAAO;QACPC,IAAA,EAAM,SAAAA,KAAA,EAAM;UAEVvB,aAAA,CAAAU,KAAA,CAAIc,QAAA,CAAS;YAAEC,GAAA,EAAK;UAAsB;QAC5C;MAAA,CACD;IAAA;IAGH,IAAMC,SAAA,GAAY,SAAZA,UAAiBC,CAAA;MACVxB,WAAA,CAAAW,KAAA,GAAQa,CAAA,CAAEb,KAAA,CAAM,CAAC;MAC7Bf,aAAA,CAAce,KAAA,GAAQ;IAAA;IAGvB,IAAMc,gBAAA,GAAmB,SAAnBA,iBAAA,EAAyB;MAC7BvB,IAAA,CAAK,YAAY;IAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC7InBwB,EAAA,CAAGC,eAAA,CAAgBC,SAAS","ignoreList":[]}